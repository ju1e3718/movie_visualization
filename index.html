<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>movie visualization</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@500&family=Noto+Serif+KR&display=swap"
        rel="stylesheet">
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.css" rel="stylesheet" type="text/css" />
    <script type="text/javascript" src="data.js"></script>
</head>
<body>
    <nav>
        <div class="nav-menu">
            <h1 class="nav-logo"><a href="index.html">영화 네트워크</a></h1>
            <ul class="nav-btn">
                <li class="dropdown">
                    <a href="#">네트워크 그래프</a>
                    <div class="dropdown-content">
                        <a href="#" id="actors-link">배우-배우</a>
                        <a href="#" id="actors2-link">배우-배우2</a>
                        <a href="#" id="coach-link">감독-배우</a>
                    </div>
                </li>
                <li class="dropdown">
                    <a href="#">배급사</a>
                    <div class="dropdown-content">
                        <a href="#" id="maker_audience-link">트리맵</a>
                        <a href="#" id="maker_year_audience-link">연도별 관객수</a>
                        <a href="#" id="maker_year_sales-link">연도별 매출액</a>
                        <a href="#" id="maker_genre_sales-link">장르별 매출액</a>
                        <a href="#" id="genre_maker_sales-link">장르 매출액</a>
                    </div>
                </li>
                <li class="dropdown">
                    <a href="#">장르</a>
                    <div class="dropdown-content">
                        <a href="#" id="genre_treemap-link">트리맵</a>
                        <a href="#" id="genre_2000-link">2000s 장르별</a>
                        <a href="#" id="genre_2010-link">2010s 장르별</a>
                        <a href="#" id="genre_2020-link">2020s 장르별</a>
                        <a href="#" id="genre_year-link">연도별 장르</a>
                    </div>
                </li>
                <li class="dropdown">
                    <a href="#">배우</a>
                    <div class="dropdown-content">
                        <a href="#" id="actor_audience_year-link">연도별 관객수</a>
                        <a href="#" id="actor_genre_2000-link">2000s 장르별</a>
                        <a href="#" id="actor_genre_2010-link">2010s 장르별</a>
                        <a href="#" id="actor_genre_2020-link">2020s 장르별</a>
                    </div>
                </li>
            </ul>
        </div>
    </nav>

    <iframe id="maker_audience-iframe" src="de_maker_audience.html" width="100%" height="800px" style="overflow-y: auto; border: none;"></iframe>

    <iframe id="actor_audience_year-iframe" src="jh_actor_audience_year.html" width="100%" height="800px" style="border: none; overflow-y: auto;"></iframe>
    <iframe id="actor_genre_2000-iframe" src="jh_actor_genre_2000.html" width="100%" height="800px" style="border: none; overflow-y: auto;"></iframe>
    <iframe id="actor_genre_2010-iframe" src="jh_actor_genre_2010.html"  width="100%" height="800px" style="border: none; overflow-y: auto;"></iframe>
    <iframe id="actor_genre_2020-iframe" src="jh_actor_genre_2020.html"  width="100%" height="800px" style="border: none; overflow-y: auto;"></iframe>

    <iframe id="genre_treemap-iframe" src="yj_treemap.html"  width="100%" height="100%" style="border: none; overflow-y: auto;"></iframe>
    <iframe id="genre_2000-iframe" src="yj_decade2000_genre.html"  width="100%" height="100%" style="border: none; overflow-y: auto;"></iframe>
    <iframe id="genre_2010-iframe" src="yj_decade2010_genre.html"  width="100%" height="100%" style="border: none; overflow-y: auto;"></iframe>
    <iframe id="genre_2020-iframe" src="yj_decade2020_genre.html"  width="100%" height="100%" style="border: none; overflow-y: auto;"></iframe>
    <iframe id="genre_year-iframe" src="yj_year_genre.html"  width="100%" height="100%" style="border: none; overflow-y: auto;"></iframe>

    <iframe id="maker_year_audience-iframe" src="hj_maker_year_audience.html"  width="100%" height="800px" style="border: none; overflow-y: auto;"></iframe>
    <iframe id="maker_year_sales-iframe" src="hj_maker_year_sales.html"  width="100%" height="800px" style="border: none; overflow-y: auto;"></iframe>
    <iframe id="maker_genre_sales-iframe" src="hj_maker_genre_sales.html"  width="100%" height="800px" style="border: none; overflow-y: auto;"></iframe>
    <iframe id="genre_maker_sales-iframe" src="hj_genre_maker_sales.html"  width="100%" height="800px" style="border: none; overflow-y: auto;"></iframe>

    <div class="search" style="display: none;">
        <input type="text" id="search-input" placeholder="배우/감독 이름을 입력">
        <button id="search-button">Search</button>
    </div>
    <div class="slider" style="display: none;">
        <label for="min-count-slider">Minimum Movies Together: </label>
        <input type="range" id="min-count-slider" min="3" max="6" value="4">
        <span id="min-count-value">4</span>
    </div>
    <div id="network" style="display: none;"></div>

    <script>
        function loadScript(file) {
            const existingScript = document.getElementById('dynamic-script');
            if (existingScript) existingScript.remove(); // Remove existing script
    
            const script = document.createElement('script');
            script.id = 'dynamic-script';
            script.src = file;
            document.body.appendChild(script);
        }
    
        // Function to show/hide elements
        function toggleElements(iframeIdToShow, showSlider = false, showSearch = false, script = null) {
            // Hide all iframes and network graph initially
            const iframes = document.querySelectorAll('iframe');
            iframes.forEach(iframe => iframe.style.display = 'none');
            document.getElementById('network').style.display = 'none';
            document.querySelector('.search').style.display = showSearch ? 'block' : 'none';
            document.querySelector('.slider').style.display = showSlider ? 'block' : 'none';
            if (iframeIdToShow) {
                document.getElementById(iframeIdToShow).style.display = 'block';
            } else {
                document.getElementById('network').style.display = 'block';
            }
            if (script) loadScript(script); // Load the new script if provided
        }
    
        // Mapping for link id to iframe id or script
        const menuConfig = {
            'actors-link': { script: 'actors.js', showSearch: true, showSlider: false },
            'actors2-link': { script: 'actors2.js', showSearch: false, showSlider: true },
            'coach-link': { script: 'coach.js', showSearch: true, showSlider: false },
            'actor_audience_year-link': { iframe: 'actor_audience_year-iframe', showSearch: false, showSlider: false },
            'actor_genre_2000-link': { iframe: 'actor_genre_2000-iframe', showSearch: false, showSlider: false },
            'actor_genre_2010-link': { iframe: 'actor_genre_2010-iframe', showSearch: false, showSlider: false },
            'actor_genre_2020-link': { iframe: 'actor_genre_2020-iframe', showSearch: false, showSlider: false },
            'maker_year_audience-link': { iframe: 'maker_year_audience-iframe', showSearch: false, showSlider: false },
            'maker_year_sales-link': { iframe: 'maker_year_sales-iframe', showSearch: false, showSlider: false },
            'maker_genre_sales-link': { iframe: 'maker_genre_sales-iframe', showSearch: false, showSlider: false },
            'genre_maker_sales-link': { iframe: 'genre_maker_sales-iframe', showSearch: false, showSlider: false },
            'maker_audience-link': { iframe: 'maker_audience-iframe', showSearch: false, showSlider: false },
            'genre_2000-link': { iframe: 'genre_2000-iframe', showSearch: false, showSlider: false },
            'genre_2010-link': { iframe: 'genre_2010-iframe', showSearch: false, showSlider: false },
            'genre_2020-link': { iframe: 'genre_2020-iframe', showSearch: false, showSlider: false },
            'genre_treemap-link': { iframe: 'genre_treemap-iframe', showSearch: false, showSlider: false },
            'genre_year-link': { iframe: 'genre_year-iframe', showSearch: false, showSlider: false }
        };

        // Event listeners for the links
        for (const [linkId, config] of Object.entries(menuConfig)) {
            document.getElementById(linkId).addEventListener('click', function (event) {
                event.preventDefault();
                toggleElements(config.iframe, config.showSlider, config.showSearch, config.script);
            });
        }
    
        // Load actors.js by default when the page is loaded
        window.addEventListener('load', function() {
            toggleElements(null, false, true, 'actors.js'); // Show search, hide slider, load actors.js by default
        });
    </script>
    
</body>
</html>
