<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>movie visualization</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@500&family=Noto+Serif+KR&display=swap"
        rel="stylesheet">
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.css" rel="stylesheet" type="text/css" />
    <script type="text/javascript" src="data.js"></script>
</head>
<body>
    <nav>
        <div class="nav-menu">
            <h1 class="nav-logo"><a href="index.html">영화 네트워크</a></h1>
            <ul class="nav-btn">
                <li class="dropdown">
                    <a href="#">네트워크 그래프</a>
                    <div class="dropdown-content">
                        <a href="#" id="actors-link">배우-배우</a>
                        <a href="#" id="actors2-link">배우-배우2</a>
                        <a href="#" id="coach-link">감독-배우</a>
                    </div>
                </li>
                <li class="dropdown">
                    <a href="#">배급사</a>
                    <div class="dropdown-content">
                        <a href="#" id="option-a-link">옵션 A</a>
                        <a href="#" id="option-b-link">옵션 B</a>
                        <a href="#">옵션 C</a>
                    </div>
                </li>
            </ul>
        </div>
    </nav>

    <iframe id="option-a-iframe" src="sales_top10.html" width="100%" height="100%" style="display: none; border: none; overflow-y: auto;"></iframe>
    <iframe id="option-b-iframe" src="audience_top10.html" width="100%" height="100%" style="display: none; border: none; overflow-y: auto;"></iframe>

    <div class="search" style="display: none;">
        <input type="text" id="search-input" placeholder="배우/감독 이름을 입력">
        <button id="search-button">Search</button>
    </div>
    <div class="slider" style="display: none;">
        <label for="min-count-slider">Minimum Movies Together: </label>
        <input type="range" id="min-count-slider" min="3" max="6" value="4">
        <span id="min-count-value">4</span>
    </div>
    <div id="network" style="display: none;"></div>

    <script>
        function loadScript(file) {
            const existingScript = document.getElementById('dynamic-script');
            if (existingScript) existingScript.remove(); // Remove existing script

            const script = document.createElement('script');
            script.id = 'dynamic-script';
            script.src = file;
            document.body.appendChild(script);
        }

        // Function to show/hide elements
        function toggleElements(iframeIdToShow, showSlider = false, showSearch = true) {
            // Hide all iframes initially
            document.getElementById('option-a-iframe').style.display = 'none';
            document.getElementById('option-b-iframe').style.display = 'none';

            // Show the selected iframe
            if (iframeIdToShow) {
                document.getElementById(iframeIdToShow).style.display = 'block';
                document.querySelector('.search').style.display = 'none';
                document.querySelector('.slider').style.display = 'none';
                document.getElementById('network').style.display = 'none';
            } else {
                document.getElementById('network').style.display = 'block';
                document.querySelector('.search').style.display = showSearch ? 'block' : 'none';
                document.querySelector('.slider').style.display = showSlider ? 'block' : 'none';
            }
        }

        // Event listeners for the links
        document.getElementById('actors-link').addEventListener('click', function (event) {
            event.preventDefault(); // Prevent link navigation
            loadScript('actors.js'); // Load actors.js
            toggleElements(null, false, true); // Show search, hide slider
        });

        document.getElementById('actors2-link').addEventListener('click', function (event) {
            event.preventDefault(); // Prevent link navigation
            loadScript('actors2.js'); // Load actors2.js
            toggleElements(null, true, false); // Show slider, hide search
        });

        document.getElementById('coach-link').addEventListener('click', function (event) {
            event.preventDefault(); // Prevent link navigation
            loadScript('coach.js'); // Load coach.js
            toggleElements(null, false, true); // Show search, hide slider
        });

        document.getElementById('option-a-link').addEventListener('click', function (event) {
            event.preventDefault(); // Prevent link navigation
            toggleElements('option-a-iframe'); // Show option-a-iframe
        });

        document.getElementById('option-b-link').addEventListener('click', function (event) {
            event.preventDefault(); // Prevent link navigation
            toggleElements('option-b-iframe'); // Show option-b-iframe
        });

        // Load actors.js by default when the page is loaded
        window.addEventListener('load', function() {
            toggleElements(null, false, true); // Show search, hide slider
            loadScript('actors.js'); // Load actors.js by default
        });
    </script>
</body>
</html>
